<div class="modal-header">
  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
    <span aria-hidden="true">&times;</span></button>
  <h4 class="signup-title">Sign up and start teaching!</h4>
</div>
<div class="modal-body">
  <%= form_for(resource, as: resource_name, url: registration_path(resource_name, format: :json), html: {id: 'user-registration'}, remote: true) do |f| %>

      <div id="message-sign-up"></div>

      <div class="form-group input-fullname">
        <%= f.text_field :full_name,  placeholder: 'Full Name', data: {errormessage_value_missing: 'name not filled in'}, required: true %>
      </div>

      <div class="form-group input-email">
        <%#= f.label :email %>
        <%= f.email_field :email, autofocus: true, placeholder: 'Email', data: {errormessage_value_missing: 'email not filled in'},  required: true %>
      </div>

      <div class="form-group input-password">
        <%= f.password_field :password, autocomplete: 'off', placeholder: 'Password', data: {errormessage_value_missing: 'password not filled in'}, required: true %>
      </div>

      <div class="form-group input-password">
        <%= f.password_field :password_confirmation, autocomplete: 'off', placeholder: 'Confirm Password', data: {errormessage_value_missing: 'confirm password not filled in'}, required: true %>
      </div>

      <div class="form-group get-signup-info">
        <label>
          <%= check_box_tag :newsletter, '' %> Get the information you need to be a successful
          &#60;domain name&#62; instructor
        </label>
      </div>

      <div class="actions">
        <%= f.submit "Sign Up", class: 'btn btn-success btn-lg btn-block' %>
        <p class="secondary-text">
          By signing up, you agree to our <a href="/terms/" target="_blank"> Terms of Use</a> and
          <a href="/terms/privacy/" target="_blank">Privacy Policy.</a>
        </p>
      </div>
  <% end %>
</div>
<div class="signup-footer">
  Already have an account?
  <%= link_to 'Login', 'javascript:void(0);', class: 'user-login-link' %>
</div>

<script type="text/javascript">
    $(function () {
        $('.user-login-link').click(function () {
            $('#become-an-instructor').modal('hide');
            $('#user-forgot-password').modal('hide');
            $('#user-login').modal('show');
        });
        $('#user-registration').on('ajax:success', function( event, data, status, xhr ){
            if(data.success){
                window.location.href = data.redirect_path;
            }
            else{
                if(typeof data.message == 'undefined') {
                    alert('You already signin');
                    window.location.href = '<%= root_path %>';
                }
                else {
                    var messageContent = '<div class="alert alert-danger">' + data.message + '</div>';
                    $('#message-sign-up').html(messageContent);
                }
            }
        });
    });
</script>
