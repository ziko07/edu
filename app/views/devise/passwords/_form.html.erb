<div class="modal-header">
  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
    <span aria-hidden="true">&times;</span></button>
  <h4 class="signup-title"> FORGOT PASSWORD </h4>
</div>
<div class="modal-body">
  <%= form_for(resource, as: resource_name, url: password_path(resource_name, format: :json), html: {method: :post, id: 'user-reset-password'}, remote: true) do |f| %>
      <div id="message-reset-password"></div>
      <div class="form-group input-email">
        <%= f.email_field :email, autofocus: true, placeholder: 'Email' %>
      </div>

      <div class="actions text-center">
        <%= f.submit 'Reset Password', class: 'btn btn-success' %>
        <span>
          or <%= link_to 'Login', 'javascript:void(0);', class: 'user-login-link' %>
        </span>
      </div>
  <% end %>
</div>
<script type="text/javascript">
    $(function(){
        $('#user-reset-password').on('ajax:success',function(event, data, status, xhr){
            if(data.success){
                popupMessage("You should now receive an email allowing you to reset your password. Please make sure to check your spam and thrash folder if you can't find the email.", 'alert-success');
                <% flash.clear %>
                $('#user-forgot-password').modal('hide');
            }
            else{
                var messageContent = '<div class="alert alert-danger">' + data.message + '</div>';
                <% flash.clear %>
                $('#message-reset-password').html(messageContent);
            }
        });
    });
</script>
