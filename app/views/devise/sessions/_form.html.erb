<div class="modal-header">
  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
    <span aria-hidden="true">&times;</span></button>
  <h4 class="signup-title"> Login to your account!</h4>
</div>
<div class="modal-body">
  <%= form_for(resource, as: resource_name, url: session_path(resource_name, format: :json), html: {id: 'user-sign-in'}, remote: true) do |f| %>
      <div id="message-sign-in"></div>
      <div class="form-group input-email">
        <%= f.email_field :email, autofocus: true, placeholder: 'Email', required: true %>
      </div>

      <div class="form-group input-password">
        <%= f.password_field :password, autocomplete: 'off', placeholder: 'Password', required: true %>
      </div>

      <div class="actions">
        <%= f.submit "Login", class: 'btn btn-success btn-lg btn-block' %>
        <div class="text-center forgot-password-wrapper">
          <%- if devise_mapping.confirmable? && controller_name != 'confirmations' %>

              <%= link_to '| Resend Confirmation Email |', new_confirmation_path(resource_name) %>
          <% end -%>
          <%= link_to ' Forgot Password |', 'javascript:void(0);', class: 'user-forgot-password-link' %>

        </div>
      </div>
  <% end %>
</div>
<div class="signup-footer">
  Don't have an account?
  <%= link_to 'Sign up', 'javascript:void(0);', class: 'user-signup-link' %>
</div>

<script type="text/javascript">
    $(function () {
        $('.user-forgot-password-link').click(function () {
            $('#user-login').modal('hide');
            $('#user-forgot-password').modal('show');
        });

        $('.user-signup-link').click(function () {
            $('#user-login').modal('hide');
            $('#become-an-instructor').modal('show');
        });
        $('#user-sign-in').on('ajax:success', function (event, data, status, xhr) {
            if (data.success) {
                $('#message-sign-in').removeClass('alert alert-danger');
                window.location.href = data.redirect_path;
            }
            else {
                var messageContent = '<div class="alert alert-danger">' + data.message + '</div>';
                $('#message-sign-in').html(messageContent);
            }
        });

    });
</script>
